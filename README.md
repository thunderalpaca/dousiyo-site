# 名前どうしよ鯖のサイト
vitepressで作成しています。  
> [!IMPORTANT]
> このリポジトリはまだまだ開発中です。

## コントリビュート
### 開発環境のセットアップ
```shell
git clone https://github.com/Valine3gDev/dousiyo-site.git
cd dousiyo-site
npm i
```
### サーバーの起動
```shell
npm run docs:dev
```
> [!TIP]
> 変更をコミットするにはフォークした自分のリポジトリにプッシュし、そのあとPRを作成してください。

現在認可以上の鉄道会社の情報のみ追加できます。

## データ確認ページについて
情報を追加する際は、 http://127.0.0.1:5173/data でどのように追加されているかを確認しながら作業を行なってください。

## 路線情報の追加
1. `/pages/company/`の追加したい路線を所有している会社のフォルダ内にある`line`に追加したい路線名のローマ字でファイルを作成します。
2. `pages/company/line.sample`の内容を作成したファイルにコピペします。
3. frontmatterの情報を編集します。サンプルファイルにある指示に従ってください。
4. 本文を編集します。サンプルファイルにある指示に従ってください。

## 駅情報の追加
1. `/pages/station/`に追加したい駅のローマ字名でファイルを作成します。
2. `/pages/station/station.sample`の内容を作成したファイルにコピペします。
3. frontmatterの情報を編集します。  サンプルファイルにある指示に従ってください。
4. 本文を編集します。サンプルファイルにある指示に従ってください。
既存の路線IDはデータ確認ページで確認できます。  
前の駅、次の駅の入力が正しい場合、データ確認ページでは対応する駅へのリンクが貼られます。  

### 路線IDについて
路線IDは会社のページのパスの先頭3文字と、ナンバリング文字を合体させたものです。  
豊急本線の場合、会社ページのパスが`toyokyu`、ナンバリング文字が`T`なので、路線IDは`toyT`となります。  

### 駅IDについて
駅IDは駅のファイル名の拡張子より前を使用します。  
高賀駅の場合は、ファイル名が`koka.md`なので、駅IDは`koka`となります。  

## 会社情報の追加
/pages/company/RULE.mdのフォーマットを確認し、`/pages/company/<会社名>.md`を作成します。

> [!IMPORTANT]
> 情報追加後は`npm run docs:build`でビルドが通るか確認してください。

## マップについて
openseadragonを使用しているので、画像を変換する必要があります。
```sh
sudo dnf install vips-tool
vips dzsave ./map2025-10-08.png ./map2025-10-08 --tile-size=256 --overlap=1 --suffix=.jpg[Q=90]
```